(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?module.exports=factory():typeof define==="function"&&define.amd?define(factory):global.Togglerone=factory()})(this,function(){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Togglerone=function(){function Togglerone(element,toggler){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,Togglerone);if(Togglerone.instances===undefined){Togglerone.instances=[]}Togglerone.instances.push(this);this.options=Object.assign({},{togglerClass:"is-active",elementClass:"is-open"},options);this.id=Togglerone.instances.length;this.element=element;this.toggler=toggler;this.eventListenerReferences={};this.bindEventListeners()}_createClass(Togglerone,[{key:"bindEventListeners",value:function bindEventListeners(){this.eventListenerReferences.onElementClick=this.onElementClick.bind(this);this.eventListenerReferences.onTogglerClick=this.onTogglerClick.bind(this);this.element.addEventListener("click",this.eventListenerReferences.onElementClick);this.toggler.addEventListener("click",this.eventListenerReferences.onTogglerClick);if(Togglerone.instances.length===1){document.addEventListener("click",Togglerone.onDocumentClick)}}},{key:"onTogglerClick",value:function onTogglerClick(event){this.element.classList.toggle(this.options.elementClass);this.toggler.classList.toggle(this.options.togglerClass);Togglerone.closeAllInstances(this);event.handledByTogglerone=true;event.preventDefault()}},{key:"onElementClick",value:function onElementClick(event){if(event.handledByTogglerone===true)return;Togglerone.closeAllInstances(this);event.handledByTogglerone=true}},{key:"close",value:function close(){this.element.classList.remove(this.options.elementClass);this.toggler.classList.remove(this.options.togglerClass)}},{key:"destroy",value:function destroy(){var key=Togglerone.instances.indexOf(this);Togglerone.instances.splice(key,1);this.element.removeEventListener("click",this.eventListenerReferences.onElementClick);this.toggler.removeEventListener("click",this.eventListenerReferences.onTogglerClick);if(Togglerone.instances.length===0){document.removeEventListener("click",Togglerone.onDocumentClick)}}}],[{key:"onDocumentClick",value:function onDocumentClick(event){if(event.handledByTogglerone===true)return;Togglerone.closeAllInstances()}},{key:"closeAllInstances",value:function closeAllInstances(originInstance){if(Togglerone.instances===undefined)return;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=Togglerone.instances[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var instance=_step.value;if(originInstance&&originInstance.id===instance.id)continue;if(originInstance&&instance.element.contains(originInstance.element))continue;instance.close()}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}}},{key:"destroyAllInstances",value:function destroyAllInstances(){if(Togglerone.instances===undefined)return;while(Togglerone.instances.length>0){Togglerone.instances[0].destroy()}}}]);return Togglerone}();return Togglerone});